# å…¨å®¶å†·å‡å¤§å®— (24) - é‡é¸é–€å¸‚é‚è¼¯

**å»ºç«‹æ—¥æœŸ**: 2025-10-22
**ç‰©æµæœå‹™**: å…¨å®¶å†·å‡å¤§å®— (24)
**é©ç”¨å°è±¡**: å·²é¸åº—ä½†éœ€è¦æ›´æ›é–€å¸‚çš„å•†å®¶

---

## ğŸ“Œ é‡é¸é–€å¸‚è§¸ç™¼æƒ…å¢ƒ

### ä»€éº¼æ™‚å€™éœ€è¦é‡é¸é–€å¸‚?

1. **æ¶ˆè²»è€…è¦æ±‚æ›´æ”¹æ”¶è²¨é–€å¸‚**
2. **åŸé–€å¸‚ç©ºé–“å·²æ»¿ç„¡æ³•æ”¶è²¨**
3. **è¨‚å–®å°šæœªå‡ºè²¨,éœ€è¦è®Šæ›´é–€å¸‚**

### é‡é¸é–€å¸‚çš„é™åˆ¶æ¢ä»¶

**å¯ä»¥é‡é¸**:
- âœ… å·²é¸åº—ä½†æœªå»ºå–® (åªæœ‰ä¿ç•™ç·¨è™Ÿ)
- âœ… å·²å»ºå–®ä½†æœªå–è™Ÿ
- âœ… å·²å–è™Ÿä½†æœªå‡ºè²¨
- âœ… è²¨æ…‹ç‚º 8001 (é€€è²¨æˆåŠŸ)

**ä¸å¯é‡é¸**:
- âŒ è¨‚å–®æ­£åœ¨ä¸Šå‚³ä¸­ (Detail_Status = 1000)
- âŒ å·²é©—æ”¶ (respcode = 4000)

---

## ğŸ”„ é‡é¸é–€å¸‚æµç¨‹

### æµç¨‹ä¸€: API è§¸ç™¼é‡é¸é–€å¸‚

**API ç«¯é»**: `POST /Member/Order/ReStoreID`

#### è«‹æ±‚åƒæ•¸

| åƒæ•¸ | å¿…å¡« | èªªæ˜ |
|------|------|------|
| user_account | âœ… | å•†å®¶ä¸»å¸³è™Ÿ |
| apicode | âœ… | å•†å®¶ API å¯†ç¢¼ |
| returnUrl | âœ… | åº—è™Ÿå›å‚³ç¶²å€ (â‰¤200å­—å…ƒ) |
| ReservedNo | âœ… | åŸä¿ç•™ç·¨è™Ÿ |
| Logistic_serviceID | âœ… | ç‰©æµæœå‹™ä»£ç¢¼ (24) |
| Length | âœ… | åŒ…è£¹é•·åº¦ (cm) |
| Wide | âœ… | åŒ…è£¹å¯¬åº¦ (cm) |
| High | âœ… | åŒ…è£¹é«˜åº¦ (cm) |
| StartDate | âœ… | å‡ºè²¨æ—¥æœŸèµ· |
| EndDate | âœ… | å‡ºè²¨æ—¥æœŸè¿„ |
| Weight | âŒ | åŒ…è£¹é‡é‡ (kg) |
| LogisticNumber | âŒ | PayNow è¨‚å–®ç·¨è™Ÿ (å·²å»ºå–®æ™‚å¿…å¡«) |
| Ecplateform | âŒ | é›»å•†å¹³å°è­˜åˆ¥ (å¦‚: WACA) |

#### é©—è­‰é‚è¼¯

**ç¨‹å¼ç¢¼ä½ç½®**: `OrderController.cs:1813-2042`

```csharp
// 1. é©—è­‰å•†å®¶å¸³è™Ÿèˆ‡ API å¯†ç¢¼
mem = cls_member.Sel_member_apicode(user_account, apicode);

// 2. ç”¨ä¿ç•™ç·¨è™ŸæŸ¥è©¢å‰ç½®æª”
order_storeid = cls_order.Sel_OrderStoreID(ReservedNo, user_account, mem.sonid, "24");

// 3. æª¢æŸ¥æ˜¯å¦å·²å»ºç«‹è¨‚å–®
Object_Order obj_order = cls_order.Sel_Order(order_storeid.orderno);

// 4. é©—è­‰è¨‚å–®ç‹€æ…‹
if (obj_order.paymentno.Length == 11)  // å·²å–è™Ÿ
{
    // æª¢æŸ¥æ˜¯å¦æ­£åœ¨ä¸Šå‚³
    if (obj_order.Detail_Status == "1000")
        throw new Exception("è¨‚å–®æ­£åœ¨ä¸Šå‚³ä¸­ç„¡æ³•é‡é¸åº—é‹ª");

    // æª¢æŸ¥æ˜¯å¦é€€è²¨æˆåŠŸ
    if (obj_order.Detail_Status != "8001")
    {
        // æª¢æŸ¥æ˜¯å¦å·²é©—æ”¶
        Dt = cls_order.Sel_LogisticProcessHistory(LogisticNumber, obj_order.paymentno);
        DataRow[] SelectDtGrant = Dt.Select("respcode='4000'");
        if (SelectDtGrant.Length > 0)
            throw new Exception("æ­¤è¨‚å–®å·²ç¶“é©—æ”¶ç„¡æ³•é‡é¸åº—é‹ª");
    }
}

// 5. æª¢æŸ¥ä¿ç•™ç©ºé–“ç‹€æ…‹
if (order_storeid.Flag == "0")  // å·²ç¢ºèªç©ºé–“
    throw new Exception("è«‹å…ˆå°‡åº—é‹ªç©ºé–“å–æ¶ˆ");

if (order_storeid.Flag == "2")  // å·²é ç´„ç©ºé–“
    cls_FamiFreezingB2C.SpaceConfirm(ReservedNo, "1");  // å–æ¶ˆç©ºé–“
```

**é©—è­‰é€šéå¾Œçš„è™•ç†** (OrderController.cs:1961-2024):

```csharp
// 1. é‡æ–°é©—è­‰æç©
Obj_MapParam obj_MapParam = cls_FamiFreezingB2C.Validate_FamiFreezingMap(
    user_account, mem.sonid, Weight, Length, Wide, High, StartDate, EndDate
);

// 2. çµ„è£é›»å­åœ°åœ–åƒæ•¸ (urltype = 03)
CvsTemp = TripleDesUserAccount + "," +
          mem.sonid + ",03," +
          order_storeid.orderno + "," +
          ReservedNo + "," +
          obj_MapParam.NumWeight + "," +
          obj_MapParam.NumLength + "," +
          obj_MapParam.NumWidth + "," +
          obj_MapParam.NumHeight + "," +
          obj_MapParam.StartDate + "," +
          obj_MapParam.EndDate + "," +
          Ecplateform;

// 3. è·³è½‰åˆ°å…¨å®¶é›»å­åœ°åœ–é‡æ–°é¸åº—
// Exchange = "true" è¡¨ç¤ºé‡é¸åº—
```

---

### æµç¨‹äºŒ: é›»å­åœ°åœ–å›å‚³æ–°é–€å¸‚ (urltype = 03)

**ç«¯é»**: `POST /Member/Order/GetFamiFreezingStoreid`

#### CvsTemp åƒæ•¸è§£æ

**æ ¼å¼** (temp.Length = 12):

```
temp[0]  = user_account (åŠ å¯†)
temp[1]  = sonid
temp[2]  = urltype = "03"
temp[3]  = orderno
temp[4]  = PastReservedNo (èˆŠä¿ç•™ç·¨è™Ÿ)
temp[5]  = NumWeight
temp[6]  = NumLength
temp[7]  = NumWidth
temp[8]  = NumHeight
temp[9]  = StartDate
temp[10] = EndDate
temp[11] = Ecplateform (å¦‚: WACA)
```

**ç¨‹å¼ç¢¼ä½ç½®**: `OrderController.cs:1042-1066`

---

### æµç¨‹ä¸‰: æ›´æ–°é–€å¸‚è³‡æ–™

**ç¨‹å¼ç¢¼ä½ç½®**: `OrderController.cs:1121-1225`

#### æƒ…å¢ƒ A: å·²å»ºå–®ä¸”å·²å–è™Ÿ

```csharp
// 1. é‡æ–°é©—è­‰æç©
obj_MapParam = cls_FamiFreezingB2C.Validate_FamiFreezingMap(
    obj_MapTemp.user_account, obj_MapTemp.sonid,
    obj_MapTemp.NumWeight, obj_MapTemp.NumLength,
    obj_MapTemp.NumWidth, obj_MapTemp.NumHeight,
    obj_MapTemp.StartDate, obj_MapTemp.EndDate
);

// 2. æŸ¥è©¢æç©è²»ç”¨ (æç©å¯èƒ½æ”¹è®Š)
Obj_VolumeServiceFee Obj_ServiceFee = cls_order.Sel_VolumeServiceFee(
    obj_MapTemp.user_account, obj_MapTemp.sonid, "24", volume, 0
);

// 3. æŸ¥è©¢å­è¨‚å–®
obj_Freezing = cls_FamiFreezingB2C.Sel_FamiFreezingB2C(obj_MapTemp.orderno);

// 4. é‡æ–°å–è™Ÿ (å› ç‚ºé–€å¸‚è®Šæ›´)
NewOrderNo = cls_FamiFreezingB2C.Sel_FamiFreezingB2CMinOrderno(
    DateTime.Now.ToString("yyyy"),
    obj_MapTemp.user_account,
    obj_MapTemp.sonid,
    obj_Freezing.LogisticNumber,
    obj_Freezing.sno,
    ParentId,
    obj_Freezing.EshopId
);

// 5. å¦‚æœæç©ä¸åŒ,æ›´æ–°ç‰©æµè²»
if (Measurement != obj_Freezing.Measurement)
{
    cls_order.Up_OrderinfoCost(obj_Freezing.LogisticNumber,
                               Obj_ServiceFee.Cost,
                               Obj_ServiceFee.Service_fee);
}

// 6. æ›´æ–°æ‰€æœ‰ç›¸é—œè³‡æ–™
Up_ReStoreFile = cls_FamiFreezingB2C.Up_ReStoreFile(
    mapData, obj_MapTemp, obj_Freezing.LogisticNumber,
    NewOrderNo, ParentId, obj_Freezing.EshopId,
    Measurement, order_storeID.ReturnUrl,
    Convert.ToBoolean(order_storeID.ReturnOrderno), "2"
);
```

**Up_ReStoreFile æ›´æ–°çš„è³‡æ–™è¡¨** (Cls_FamiFreezingB2C.cs:2273-2368):

1. **Order_Info** (ä¸»è¨‚å–®è¡¨):
   ```sql
   Update Order_Info set
       Weight=@Weight,
       Length=@Length,
       Width=@Width,
       Height=@Height,
       receiver_storeid=@receiver_storeid,
       paymentno=@paymentno,
       receiver_storename=@receiver_storename,
       IsPrinted='0',      -- é‡ç½®åˆ—å°ç‹€æ…‹
       IsShipping='0',     -- é‡ç½®å‡ºè²¨ç‹€æ…‹
       ShipDate = null     -- æ¸…é™¤å‡ºè²¨æ—¥æœŸ
   where LogisticNumber=@LogisticNumber
   ```

2. **FamiFreezingB2COrder** (å­è¨‚å–®è¡¨):
   ```sql
   EXEC Up_FamiFreezingB2COrder_ReservedNo
       @LogisticNumber,
       @OrderNo,           -- æ–°çš„é…é€ç·¨è™Ÿ
       @user_account,
       @ParentId,
       @EshopId,
       @ReservedNo,        -- æ–°çš„ä¿ç•™ç·¨è™Ÿ
       @Measurement,
       @ShipDate,          -- ä½¿ç”¨æ–°çš„ OrderDate
       @ReceiverStoreId
   ```

3. **OrderStoreID** (å‰ç½®æª” - ä½¿ç”¨èˆŠä¿ç•™ç·¨è™Ÿæ›´æ–°):
   ```sql
   EXEC Up_OrderStoreID_Volume
       @user_account,
       @ReservedNo = PastReservedNo,  -- ä½¿ç”¨èˆŠä¿ç•™ç·¨è™Ÿ
       @Weight,
       @Length,
       @Width,
       @Height,
       @StartDate,
       @EndDate
   ```

4. **OrderStoreID** (å‰ç½®æª” - ä½¿ç”¨è¨‚å–®ç·¨è™Ÿæ›´æ–°):
   ```sql
   EXEC Up_OrderStoreID
       @user_account,
       @orderno,
       @Logistic_service = '24',
       @StoreID,           -- æ–°é–€å¸‚ä»£ç¢¼
       @StoreName,         -- æ–°é–€å¸‚åç¨±
       @StoreAddress,      -- æ–°é–€å¸‚åœ°å€
       @returnUrl,
       @ReturnOrderno,
       @OrderDate,         -- æ–°çš„ä¸Šæ”¶æ—¥
       @ShipDate,          -- æ–°çš„ DC å‡ºè²¨æ—¥
       @ReservedNo,        -- æ–°çš„ä¿ç•™ç·¨è™Ÿ
       @Flag = '2'
   ```

---

#### æƒ…å¢ƒ B: åƒ…é¸åº—æœªå»ºå–®

```csharp
// åªéœ€æ›´æ–°å‰ç½®æª”
// 1. æ›´æ–°åº—é‹ªæª”æç©
UpVolume = cls_order.Up_OrderStoreID_Volume(
    obj_MapTemp.user_account,
    obj_MapTemp.PastReservedNo,  // ä½¿ç”¨èˆŠä¿ç•™ç·¨è™Ÿ
    obj_MapTemp.NumWeight,
    obj_MapTemp.NumLength,
    obj_MapTemp.NumWidth,
    obj_MapTemp.NumHeight,
    obj_MapTemp.StartDate,
    obj_MapTemp.EndDate
);

// 2. æ›´æ–°åº—é‹ªè³‡æ–™
returnstr = cls_order.Up_OrderStoreID(
    obj_MapTemp.orderno,
    obj_MapTemp.user_account,
    obj_MapTemp.sonid,
    "24",
    mapDataDetail.StoreId,    // æ–°é–€å¸‚
    mapDataDetail.Name,       // æ–°é–€å¸‚åç¨±
    mapDataDetail.Addr,       // æ–°é–€å¸‚åœ°å€
    order_storeID.ReturnUrl,
    Convert.ToBoolean(order_storeID.ReturnOrderno),
    mapItemDetail.OrderDate,  // æ–°çš„ä¸Šæ”¶æ—¥
    mapItemDetail.ShipDate,   // æ–°çš„ DC å‡ºè²¨æ—¥
    mapItemDetail.ReservedNo, // æ–°çš„ä¿ç•™ç·¨è™Ÿ
    "2"                       // Flag = 2 (å·²é ç´„)
);
```

---

## ğŸ“‹ é‡é¸é–€å¸‚å¾Œçš„ç‹€æ…‹è®ŠåŒ–

### è³‡æ–™åº«ç‹€æ…‹è®ŠåŒ–

| é …ç›® | é‡é¸å‰ | é‡é¸å¾Œ |
|------|--------|--------|
| **OrderStoreID.ReservedNo** | èˆŠä¿ç•™ç·¨è™Ÿ | æ–°ä¿ç•™ç·¨è™Ÿ |
| **OrderStoreID.StoreID** | èˆŠé–€å¸‚ä»£ç¢¼ | æ–°é–€å¸‚ä»£ç¢¼ |
| **OrderStoreID.StoreName** | èˆŠé–€å¸‚åç¨± | æ–°é–€å¸‚åç¨± |
| **OrderStoreID.StoreAddress** | èˆŠé–€å¸‚åœ°å€ | æ–°é–€å¸‚åœ°å€ |
| **OrderStoreID.OrderDate** | èˆŠä¸Šæ”¶æ—¥ | æ–°ä¸Šæ”¶æ—¥ |
| **OrderStoreID.ShipDate** | èˆŠ DC å‡ºè²¨æ—¥ | æ–° DC å‡ºè²¨æ—¥ |
| **OrderStoreID.Flag** | 0 or 2 | 2 (å·²é ç´„) |
| **Order_Info.receiver_storeid** | èˆŠé–€å¸‚ä»£ç¢¼ | æ–°é–€å¸‚ä»£ç¢¼ |
| **Order_Info.receiver_storename** | èˆŠé–€å¸‚åç¨± | æ–°é–€å¸‚åç¨± |
| **Order_Info.paymentno** | èˆŠé…é€ç·¨è™Ÿ | æ–°é…é€ç·¨è™Ÿ (å·²å–è™Ÿæ™‚) |
| **Order_Info.IsPrinted** | 0 or 1 | 0 (é‡ç½®) |
| **Order_Info.IsShipping** | 0 or 1 | 0 (é‡ç½®) |
| **Order_Info.ShipDate** | åŸå‡ºè²¨æ—¥ | null (æ¸…é™¤) |
| **FamiFreezingB2COrder.ReservedNo** | èˆŠä¿ç•™ç·¨è™Ÿ | æ–°ä¿ç•™ç·¨è™Ÿ |
| **FamiFreezingB2COrder.OrderNo** | èˆŠé…é€ç·¨è™Ÿ | æ–°é…é€ç·¨è™Ÿ (å·²å–è™Ÿæ™‚) |
| **FamiFreezingB2COrder.ReceiverStoreId** | èˆŠé–€å¸‚ä»£ç¢¼ | æ–°é–€å¸‚ä»£ç¢¼ |
| **FamiFreezingB2COrder.ShipDate** | èˆŠ OrderDate | æ–° OrderDate |
| **FamiFreezingB2COrder.Measurement** | èˆŠæç© | æ–°æç© (å¯èƒ½æ”¹è®Š) |

### é‡è¦æé†’

1. **èˆŠä¿ç•™ç·¨è™Ÿçš„ç©ºé–“æœƒè¢«å–æ¶ˆ** (`SpaceConfirm(ReservedNo, "1")`)
2. **æ–°ä¿ç•™ç·¨è™Ÿçš„ç©ºé–“æœƒè‡ªå‹•é ç´„** (Flag = 2)
3. **å·²å–è™Ÿçš„è¨‚å–®æœƒé‡æ–°å–è™Ÿ** (é…é€ç·¨è™Ÿæ”¹è®Š)
4. **åˆ—å°å’Œå‡ºè²¨ç‹€æ…‹æœƒé‡ç½®** (éœ€é‡æ–°åˆ—å°æ¨™ç±¤)
5. **æç©æ”¹è®Šæ™‚æœƒæ›´æ–°ç‰©æµè²»ç”¨**

---

## ğŸ”„ ç©ºé–“å–æ¶ˆ API

**API**: å…¨å®¶ ShopSpaceConfirm API

**ç«¯é»**: `/ShopSpaceConfirm/ShopSpaceConfirm.ashx`

**ç¨‹å¼ç¢¼ä½ç½®**: `Cls_FamiFreezingB2C.cs:1560-1640`

### è«‹æ±‚åƒæ•¸

```xml
<?xml version="1.0" encoding="UTF-8"?>
<Doc>
  <ReservedNos>
    <ReservedNo>ä¿ç•™ç·¨è™Ÿ</ReservedNo>
    <Flag>1</Flag>  <!-- 0:ç¢ºèª 1:å–æ¶ˆ -->
  </ReservedNos>
</Doc>
```

### Flag èªªæ˜

| Flag | èªªæ˜ | ç”¨é€” |
|------|------|------|
| 0 | ç¢ºèªç©ºé–“ | ç¢ºå®šè¦ä½¿ç”¨æ­¤ä¿ç•™ç©ºé–“ |
| 1 | å–æ¶ˆç©ºé–“ | é‡‹æ”¾ä¿ç•™ç©ºé–“ |

### å›å‚³éŒ¯èª¤ç¢¼è™•ç†

| ErrorCode | ErrorMessage | ç³»çµ±è™•ç† |
|-----------|-------------|---------|
| 000 | æˆåŠŸ | è¿”å› "S" |
| 102 | æ­¤å–®å·²ä½œå»¢ | Flag=0 æ™‚æ‹‹éŒ¯,Flag=1 æ™‚è¿”å› "S" |
| 022 | ä¸å¯é‡è¦†å–æ¶ˆ | è¿”å› "S" |
| 023 | ä¸å¯é‡è¦†ç¢ºèª | è¿”å› "S" |
| å…¶ä»– | éŒ¯èª¤è¨Šæ¯ | æ‹‹å‡ºä¾‹å¤– |

---

## ğŸ¯ é‡é¸é–€å¸‚çš„æ™‚é–“é™åˆ¶

### å¯é‡é¸çš„æ™‚é–“ç¯„åœ

é‡é¸é–€å¸‚çš„æ™‚é–“é™åˆ¶èˆ‡åŸè¨‚å–®çš„ OrderDate ç›¸é—œ:

```
åŸè¨‚å–® OrderDate = 10/7

å¯é‡é¸æœŸé–“:
- 10/6 (OrderDate - 1) é–‹å§‹å¯ä»¥é‡é¸
- 10/9 (OrderDate + 2) 15:50 å‰å¿…é ˆå®Œæˆé‡é¸
- 10/10 é–‹å§‹ API æœƒæ‹‹éŒ¯
```

**æ³¨æ„**:
- é‡é¸å¾Œæœƒå¾—åˆ°æ–°çš„ OrderDate
- æ–°çš„ OrderDate å¿…é ˆç¬¦åˆå…¨å®¶çš„é…é€æ—¥è¦å‰‡
- WACA å¹³å°æ”¶åˆ°çš„ ShipDate ä»ç„¶æœƒ -1 å¤©

---

## ğŸš¨ å¸¸è¦‹éŒ¯èª¤èˆ‡è™•ç†

### éŒ¯èª¤ 1: è¨‚å–®æ­£åœ¨ä¸Šå‚³ä¸­ç„¡æ³•é‡é¸åº—é‹ª

**åŸå› **: Detail_Status = 1000 (è¨‚å–®æ­£åœ¨ä¸Šå‚³ FTP)
**è§£æ±º**: ç­‰å¾…ä¸Šå‚³å®Œæˆå¾Œå†é‡é¸

### éŒ¯èª¤ 2: æ­¤è¨‚å–®å·²ç¶“é©—æ”¶ç„¡æ³•é‡é¸åº—é‹ª

**åŸå› **: æ¶ˆè²»è€…å·²å–è²¨é©—æ”¶ (respcode = 4000)
**è§£æ±º**: ç„¡æ³•é‡é¸,éœ€é‡æ–°å»ºç«‹è¨‚å–®

### éŒ¯èª¤ 3: è«‹å…ˆå°‡åº—é‹ªç©ºé–“å–æ¶ˆ

**åŸå› **: OrderStoreID.Flag = 0 (ç©ºé–“å·²ç¢ºèª)
**è§£æ±º**: ç³»çµ±æ‡‰è‡ªå‹•å‘¼å« SpaceConfirm(ReservedNo, "1") å–æ¶ˆç©ºé–“

### éŒ¯èª¤ 4: ç‰©æµç·¨è™Ÿç‚º:XXX çš„åº—é‹ªç©ºé–“æœªä¿ç•™

**åŸå› **: OrderStoreID.Flag != 0 (ç©ºé–“æœªä¿ç•™æˆ–å·²å–æ¶ˆ)
**è§£æ±º**: æª¢æŸ¥åŸä¿ç•™ç·¨è™Ÿæ˜¯å¦éæœŸæˆ–è¢«å–æ¶ˆ

### éŒ¯èª¤ 5: PayNow è¨‚å–®ç·¨è™Ÿèˆ‡ä¿ç•™ç·¨è™Ÿä¸åŒ

**åŸå› **: å‚³å…¥çš„ LogisticNumber èˆ‡è³‡æ–™åº«ä¸ç¬¦
**è§£æ±º**: ä½¿ç”¨æ­£ç¢ºçš„ LogisticNumber

---

## ğŸ“Š é‡é¸é–€å¸‚æ™‚é–“è»¸ç¯„ä¾‹

### æƒ…å¢ƒ: 10/6 é¸åº—,10/7 éœ€è¦é‡é¸

```
10/6 10:00
  â””â”€ åˆæ¬¡é¸åº— (ReservedNo: A123456789)
     - OrderDate = 10/7
     - ShipDate = 10/8

10/7 14:00
  â””â”€ æ¶ˆè²»è€…è¦æ±‚æ›´æ›é–€å¸‚
     - å‘¼å« ReStoreID API
     - ç³»çµ±å–æ¶ˆèˆŠä¿ç•™ç·¨è™Ÿç©ºé–“
     - è·³è½‰å…¨å®¶é›»å­åœ°åœ–é‡æ–°é¸åº—

10/7 14:05
  â””â”€ é¸æ“‡æ–°é–€å¸‚å®Œæˆ (ReservedNo: B987654321)
     - æ–° OrderDate = 10/8
     - æ–° ShipDate = 10/9
     - urltype = 03 å›å‚³åˆ° GetFamiFreezingStoreid

10/7 14:06
  â””â”€ ç³»çµ±æ›´æ–°è³‡æ–™
     â”œâ”€ æ›´æ–° OrderStoreID (æ–°é–€å¸‚ã€æ–°ä¿ç•™ç·¨è™Ÿã€æ–°æ—¥æœŸ)
     â”œâ”€ æ›´æ–° Order_Info (é‡ç½®åˆ—å°ç‹€æ…‹)
     â”œâ”€ æ›´æ–° FamiFreezingB2COrder (é‡æ–°å–è™Ÿ)
     â””â”€ å›å‚³æ–°è³‡æ–™çµ¦å•†å®¶

10/8
  â””â”€ å…¨å®¶æ´¾è»Šåˆ°å•†å®¶æ”¶è²¨ (ä½¿ç”¨æ–° OrderDate)

10/9
  â””â”€ è²¨ç‰©åˆ°é”å…¨å®¶ç‰©æµä¸­å¿ƒ (æ–° ShipDate)
```

---

## ğŸ’» ç›¸é—œç¨‹å¼ç¢¼ä½ç½®

| åŠŸèƒ½ | æª”æ¡ˆ | è¡Œæ•¸ | èªªæ˜ |
|------|------|------|------|
| é‡é¸é–€å¸‚ API | OrderController.cs | 1813-2042 | ReStoreID æ–¹æ³• |
| é›»å­åœ°åœ–å›å‚³ (urltype=03) | OrderController.cs | 1042-1066 | CvsTemp è§£æ |
| å·²å–è™Ÿçš„é‡é¸è™•ç† | OrderController.cs | 1121-1225 | é‡æ–°å–è™Ÿ + æ›´æ–°è³‡æ–™ |
| æœªå»ºå–®çš„é‡é¸è™•ç† | OrderController.cs | 1206-1224 | åªæ›´æ–°å‰ç½®æª” |
| æ›´æ–°æ‰€æœ‰ç›¸é—œè³‡æ–™ | Cls_FamiFreezingB2C.cs | 2273-2368 | Up_ReStoreFile |
| ç©ºé–“å–æ¶ˆ API | Cls_FamiFreezingB2C.cs | 1560-1640 | SpaceConfirm |
| é‡æ–°å–è™Ÿ | Cls_FamiFreezingB2C.cs | - | Sel_FamiFreezingB2CMinOrderno |

---

**æ–‡ä»¶ç¶­è­·**:
- âœ… å·²ç¢ºèªé‡é¸é–€å¸‚å®Œæ•´æµç¨‹
- âœ… å·²ç¢ºèªå…©ç¨®æƒ…å¢ƒ (å·²å–è™Ÿ/æœªå»ºå–®)
- âœ… å·²ç¢ºèªç©ºé–“å–æ¶ˆé‚è¼¯
- âœ… å·²ç¢ºèªè³‡æ–™è¡¨æ›´æ–°ç¯„åœ
